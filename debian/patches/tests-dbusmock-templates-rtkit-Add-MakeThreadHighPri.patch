From d285a9c21cbdc20538f3562a427dc1b6b3546c24 Mon Sep 17 00:00:00 2001
From: Ray Strode <rstrode@redhat.com>
Date: Wed, 11 Oct 2023 09:37:54 -0400
Subject: [PATCH 2/4] tests/dbusmock-templates/rtkit: Add
 MakeThreadHighPriority

mutter will soon need to call an additional method in RTKit,
MakeThreadHighPriority.

In preparation for that, this commit stubs it out in the
dbusmock template.

Part-of: <https://gitlab.gnome.org/GNOME/mutter/-/merge_requests/3324>
---
 src/tests/dbusmock-templates/rtkit.py | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/tests/dbusmock-templates/rtkit.py b/src/tests/dbusmock-templates/rtkit.py
index 168582de8..766bd681e 100644
--- a/src/tests/dbusmock-templates/rtkit.py
+++ b/src/tests/dbusmock-templates/rtkit.py
@@ -26,6 +26,10 @@ def load(mock, parameters):
 def MakeThreadRealtime(self, thread, priority):
     self.priorities[thread] = priority
 
+@dbus.service.method(MAIN_IFACE, in_signature='tu')
+def MakeThreadHighPriority(self, thread, priority):
+    self.priorities[thread] = priority
+
 @dbus.service.method(MOCK_IFACE)
 def Reset(self):
     self.priorities = dict()
-- 
2.34.1

